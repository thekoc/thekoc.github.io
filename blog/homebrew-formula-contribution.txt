1:HL["/_next/static/media/2d141e1a38819612-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/_next/static/css/07cc5756ac5bd00f.css",{"as":"style"}]
0:["Wt7vpKvlZgwcj5cSGfJWi",[[["",{"children":["blog",{"children":[["slug","homebrew-formula-contribution","c"],{"children":["__PAGE__?{\"slug\":[\"homebrew-formula-contribution\"]}",{}]}]}]},"$undefined","$undefined",true],"$L3",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/07cc5756ac5bd00f.css","precedence":"next"}]],"$L4"]]]]
5:HL["/_next/static/css/dbc73c933534e0e3.css",{"as":"style"}]
6:I{"id":8464,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","771:static/chunks/771-35a7f5e6bc30df80.js","185:static/chunks/app/layout-f01836e259cfee1f.js"],"name":"ThemeProviders","async":false}
7:I{"id":3015,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","771:static/chunks/771-35a7f5e6bc30df80.js","185:static/chunks/app/layout-f01836e259cfee1f.js"],"name":"","async":false}
8:I{"id":367,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","771:static/chunks/771-35a7f5e6bc30df80.js","185:static/chunks/app/layout-f01836e259cfee1f.js"],"name":"KBarSearchProvider","async":false}
9:I{"id":6685,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","797:static/chunks/app/blog/[...slug]/page-af73ad6bf5b4fe05.js"],"name":"","async":false}
a:I{"id":6914,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","771:static/chunks/771-35a7f5e6bc30df80.js","185:static/chunks/app/layout-f01836e259cfee1f.js"],"name":"","async":false}
b:I{"id":8766,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","771:static/chunks/771-35a7f5e6bc30df80.js","185:static/chunks/app/layout-f01836e259cfee1f.js"],"name":"","async":false}
c:I{"id":7767,"chunks":["272:static/chunks/webpack-c40fc2d1c5532abf.js","971:static/chunks/fd9d1056-9dadb51d24d38e6a.js","596:static/chunks/596-23e3fe0546e216e4.js"],"name":"default","async":false}
d:I{"id":7920,"chunks":["272:static/chunks/webpack-c40fc2d1c5532abf.js","971:static/chunks/fd9d1056-9dadb51d24d38e6a.js","596:static/chunks/596-23e3fe0546e216e4.js"],"name":"default","async":false}
4:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"如何将软件添加到Homebrew的默认源中? | 窠臼.blog"}],["$","meta","2",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","3",{"name":"robots","content":"index, follow"}],["$","meta","4",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","5",{"rel":"canonical","href":"https://tailwind-nextjs-starter-blog.vercel.app/blog/homebrew-formula-contribution"}],["$","link","6",{"rel":"alternate","type":"application/rss+xml","href":"https://tailwind-nextjs-starter-blog.vercel.app/feed.xml"}],["$","meta","7",{"property":"og:title","content":"如何将软件添加到Homebrew的默认源中?"}],["$","meta","8",{"property":"og:url","content":"https://tailwind-nextjs-starter-blog.vercel.app/blog/homebrew-formula-contribution"}],["$","meta","9",{"property":"og:site_name","content":"窠臼.blog"}],["$","meta","10",{"property":"og:locale","content":"en_US"}],["$","meta","11",{"property":"og:type","content":"article"}],["$","meta","12",{"property":"article:published_time","content":"2023-10-08T00:00:00.000Z"}],["$","meta","13",{"property":"article:modified_time","content":"2023-10-08T00:00:00.000Z"}],["$","meta","14",{"property":"article:author","content":"thekoc"}],["$","meta","15",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","16",{"name":"twitter:title","content":"如何将软件添加到Homebrew的默认源中?"}],["$","meta","17",{"name":"next-size-adjust"}]]
3:[null,["$","html",null,{"lang":"en-us","className":"__variable_641c3b scroll-smooth","suppressHydrationWarning":true,"children":[["$","link",null,{"rel":"apple-touch-icon","sizes":"76x76","href":"/static/favicons/apple-touch-icon.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/static/favicons/favicon-32x32.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/static/favicons/favicon-16x16.png"}],["$","link",null,{"rel":"manifest","href":"/static/favicons/site.webmanifest"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#000000"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#fff"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#000"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}],["$","body",null,{"className":"bg-white text-black antialiased dark:bg-gray-950 dark:text-white","children":["$","$L6",null,{"children":[["$undefined","$undefined","$undefined",["$","$L7",null,{"async":true,"defer":true,"data-website-id":"$undefined","src":"https://analytics.umami.is/script.js"}],"$undefined"],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":["$","div",null,{"className":"flex h-screen flex-col justify-between font-sans","children":[["$","$L8",null,{"kbarConfig":{"searchDocumentsPath":"search.json"},"children":[["$","header",null,{"className":"flex items-center justify-between py-10","children":[["$","div",null,{"children":["$","$L9",null,{"href":"/","aria-label":"窠臼.blog","children":["$","div",null,{"className":"flex items-center justify-between","children":[["$","div",null,{"className":"mr-3","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":50,"height":50,"children":[["$","path",null,{"d":"M7.45 41.676h27.5v-9H7.45Zm0 0","style":{"stroke":"none","fillRule":"evenodd","fill":"#2e3440","fillOpacity":1}}],["$","path",null,{"d":"M16 34.023h27.5v-9H16Zm0 0","style":{"stroke":"none","fillRule":"evenodd","fill":"#f5efda","fillOpacity":1}}],["$","path",null,{"d":"M6.5 29.074H34v-9H6.5Zm0 0","style":{"stroke":"none","fillRule":"evenodd","fill":"#679b49","fillOpacity":1}}],["$","path",null,{"d":"M16 21.398h27.5v-9H16Zm0 0","style":{"stroke":"none","fillRule":"evenodd","fill":"#f08d42","fillOpacity":1}}],["$","path",null,{"d":"M10.2 24h27.5v-9H10.2Zm0 0","style":{"stroke":"none","fillRule":"evenodd","fill":"#f6d21e","fillOpacity":1}}]]}]}],["$","div",null,{"className":"h-6 text-2xl font-semibold sm:block","children":"窠臼.blog"}]]}]}]}],["$","div",null,{"className":"flex items-center leading-5 space-x-4 sm:space-x-6","children":[[["$","$L9",null,{"href":"/blog","className":"hidden sm:block font-medium text-gray-900 dark:text-gray-100","children":"All"}],["$","$L9",null,{"href":"/tags","className":"hidden sm:block font-medium text-gray-900 dark:text-gray-100","children":"Tags"}],["$","$L9",null,{"href":"/about","className":"hidden sm:block font-medium text-gray-900 dark:text-gray-100","children":"About"}]],["$","$La",null,{}],["$","$Lb",null,{}]]}]]}],["$","main",null,{"className":"mb-auto","children":["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","notFound":["$","div",null,{"className":"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6","children":[["$","div",null,{"className":"space-x-2 pb-8 pt-6 md:space-y-5","children":["$","h1",null,{"className":"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14","children":"404"}]}],["$","div",null,{"className":"max-w-md","children":[["$","p",null,{"className":"mb-4 text-xl font-bold leading-normal md:text-2xl","children":"Sorry we couldn't find this page."}],["$","p",null,{"className":"mb-8","children":"But dont worry, you can find plenty of other things on our homepage."}],["$","$L9",null,{"href":"/","className":"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500","children":"Back to homepage"}]]}]]}],"notFoundStyles":[],"childProp":{"current":["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children",["slug","homebrew-formula-contribution","c"],"children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Le","$Lf",null],"segment":"__PAGE__?{\"slug\":[\"homebrew-formula-contribution\"]}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/dbc73c933534e0e3.css","precedence":"next"}]]}],"segment":["slug","homebrew-formula-contribution","c"]},"styles":[]}],"segment":"blog"},"styles":[]}]}]]}],["$","footer",null,{"children":["$","div",null,{"className":"mt-16 flex flex-col items-center","children":[["$","div",null,{"className":"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400","children":[["$","div",null,{"children":"thekoc"}],["$","div",null,{"children":" • "}],["$","div",null,{"children":"© 2023"}],["$","div",null,{"children":" • "}],["$","$L9",null,{"href":"/","children":"窠臼.blog"}]]}],["$","div",null,{"className":"mb-8 text-sm text-gray-500 dark:text-gray-400","children":["$","div",null,{"children":["Based on ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/timlrx/tailwind-nextjs-starter-blog","children":"Tails Azimuth's project."}]]}]}]]}]}]]}]}]]}]}]]}],null]
10:I{"id":2630,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","797:static/chunks/app/blog/[...slug]/page-af73ad6bf5b4fe05.js"],"name":"","async":false}
11:I{"id":2529,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","797:static/chunks/app/blog/[...slug]/page-af73ad6bf5b4fe05.js"],"name":"","async":false}
12:I{"id":5940,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","797:static/chunks/app/blog/[...slug]/page-af73ad6bf5b4fe05.js"],"name":"","async":false}
f:[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"如何将软件添加到Homebrew的默认源中?\",\"datePublished\":\"2023-10-08T00:00:00.000Z\",\"dateModified\":\"2023-10-08T00:00:00.000Z\",\"description\":\"\",\"url\":\"https://tailwind-nextjs-starter-blog.vercel.app/blog/homebrew-formula-contribution\",\"author\":[{\"@type\":\"Person\",\"name\":\"thekoc\"}]}"}}],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":[["$","$L10",null,{}],["$","article",null,{"children":["$","div",null,{"className":"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700","children":[["$","header",null,{"className":"pt-6 xl:pb-6","children":["$","div",null,{"className":"space-y-1 text-center","children":[["$","dl",null,{"className":"space-y-10","children":["$","div",null,{"children":[["$","dt",null,{"className":"sr-only","children":"Published on"}],["$","dd",null,{"className":"text-base font-medium leading-6 text-gray-500 dark:text-gray-400","children":["$","time",null,{"dateTime":"2023-10-08T00:00:00.000Z","children":"Sunday, October 8, 2023"}]}]]}]}],["$","div",null,{"children":["$","h1",null,{"className":"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14","children":"如何将软件添加到Homebrew的默认源中?"}]}]]}]}],["$","div",null,{"className":"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0","children":[["$","dl",null,{"className":"pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700","children":[["$","dt",null,{"className":"sr-only","children":"Authors"}],["$","dd",null,{"children":["$","ul",null,{"className":"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8","children":[["$","li","thekoc",{"className":"flex items-center space-x-2","children":[["$","img",null,{"src":"/static/images/avatar.jpg","width":38,"height":38,"alt":"avatar","className":"h-10 w-10 rounded-full"}],["$","dl",null,{"className":"whitespace-nowrap text-sm font-medium leading-5","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"className":"text-gray-900 dark:text-gray-100","children":"thekoc"}],["$","dt",null,{"className":"sr-only","children":"Twitter"}],["$","dd",null,{"children":["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/thekoc","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"@thekoc"}]}]]}]]}]]}]}]]}],["$","div",null,{"className":"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0","children":[["$","div",null,{"className":"prose max-w-none pb-8 pt-10 dark:prose-invert","children":[["$","h2",null,{"id":"前言","children":[["$","a",null,{"href":"#前言","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"前言"]}],["$","p",null,{"children":"如果你不巧是 macOS 用户, 接着又不巧有一定的编程经验，那么大概你也不巧会知道 Homebrew，一个第三方 Mac 包管理软件。网络上对于 Homebrew 本身的介绍很多，但这篇文章不是关于如何“使用” Homebrew 的，而是关于如何将一个软件添加到 Homebrew 的默认源中。"}],["$","h2",null,{"id":"homebrew-的默认源","children":[["$","a",null,{"href":"#homebrew-的默认源","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"Homebrew 的默认源"]}],["$","p",null,{"children":["Homebrew 使用起来非常简单，譬如，如果你要安装 ",["$","code",null,{"children":"weget"}]," 命令："]}],["$","$L11",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":["brew ",["$","span",null,{"className":"token function","children":"install"}]," ",["$","span",null,{"className":"token function","children":"wget"}],"\n"]}]}]}],["$","p",null,{"children":["Homebrew 接着就会将软件自动安装到对应目录。那么 Homebrew 是如何知道 ",["$","code",null,{"children":"wget"}]," 的下载链接的呢？又是如何知道 ",["$","code",null,{"children":"wget"}]," 是如何安装的呢？废话不多说，除去一堆复杂的 CI/CD 自动化流程，所有 Homebrew 默认的包的来源就是这个 Github 仓库："]}],["$","blockquote",null,{"children":["$","p",null,{"children":["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/Homebrew/homebrew-core","children":"Homebrew/homebrew-core"}]}]}],["$","p",null,{"children":"所以如果你想将一个新的软件添加到默认源中，你本质上需要做的就是向这个仓库提 PR 请求。"}],["$","p",null,{"children":["这里说一下 Homebrew（原则上）对于添加到默认源中软件的一些要求，更详细的请查看官方的文档：",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.brew.sh/Acceptable-Formulae","children":"Acceptable Formulae - Homebrew Documentation"}]]}],["$","ol",null,{"children":[["$","li",null,{"children":"软件不应该进行自我更新"}],["$","li",null,{"children":"软件应该是以源代码形式发放（而不是二进制）"}],["$","li",null,{"children":["软件的开源协议需要满足 ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://wiki.debian.org/DFSGLicenses","children":"Debian Free Software Guidelines license"}]]}],["$","li",null,{"children":"软件需要能在最新的稳定 Xcode Clang 中编译"}],["$","li",null,{"children":["软件最好不要编译出一个图形程序或者 ",["$","code",null,{"children":".app"}]," 程序。"]}],["$","li",null,{"children":"以上一切都不是强制性要求。（Sometimes there are exceptions Even if all criteria are met we may not accept the formula. Documentation tends to lag behind current decision-making. Although some rejections may seem arbitrary or strange they are based on years of experience making Homebrew work acceptably for our users.)"}]]}],["$","h2",null,{"id":"formula-文件","children":[["$","a",null,{"href":"#formula-文件","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"Formula 文件"]}],["$","p",null,{"children":["刚刚提到，所有 Homebrew 默认的包的来源就是这个 ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/Homebrew/homebrew-core","children":"Github 仓库"}],"，更具体地说，是来自于该仓库 ",["$","code",null,{"children":"homebrew-core/Formula/"}]," 文件夹中的 ",["$","code",null,{"children":"*.rb"}]," 文件。这个文件本质上是一个 ",["$","code",null,{"children":"ruby"}]," 的一个类的定义文件，但是这里也可以看作一个配置文件。以下是一个示例："]}],["$","$L11",null,{"className":"language-ruby","children":["$","code",null,{"className":"code-highlight language-ruby","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"Foo"}]," ",["$","span",null,{"className":"token operator","children":"<"}]," Formula\n"]}],["$","span",null,{"className":"code-line","children":["  desc ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  homepage ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  url ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"https://example.com/foo-0.1.tar.gz\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  sha256 ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"85cc828a96735bdafcf29eb6291ca91bac846579bcef7308536e0c875d6c81d7\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  license ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"# depends_on \"cmake\" => :build"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"def"}]," ",["$","span",null,{"className":"token method-definition","children":["$","span",null,{"className":"token function","children":"install"}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# ENV.deparallelize"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    system ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"./configure\""}]}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token operator","children":"*"}],"std_configure_args",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"--disable-silent-rules\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# system \"cmake\", \"-S\", \".\", \"-B\", \"build\", *std_cmake_args"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    system ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"make\""}]}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"install\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"end"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  test ",["$","span",null,{"className":"token keyword","children":"do"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    system ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"false\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"end"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"end"}],"\n"]}]]}]}],["$","p",null,{"children":["这里是详细的字段定义：",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://rubydoc.brew.sh/Formula#resource-class_method","children":"https://rubydoc.brew.sh/Formula#resource-class_method"}]]}],["$","p",null,{"children":["Homebrew 提供了一些通用的模板，通过命令 ",["$","code",null,{"children":"brew create <URL>"}]," 生成，其中 ",["$","code",null,{"children":"<URL>"}]," 为一个 ",["$","code",null,{"children":"zip"}]," 或者 ",["$","code",null,{"children":"tarball"}]," ，同时这个命令也能根据对应语言来生成模板，例如：",["$","code",null,{"children":"brew create --go https://example.com/foo-0.1.tar.gz"}]," 会生成这样一个配置文件:"]}],["$","$L11",null,{"className":"language-ruby","children":["$","code",null,{"className":"code-highlight language-ruby","children":[["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Documentation: https://docs.brew.sh/Formula-Cookbook"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"#                https://rubydoc.brew.sh/Formula"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# PLEASE REMOVE ALL GENERATED COMMENTS BEFORE SUBMITTING YOUR PULL REQUEST!"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"Foo"}]," ",["$","span",null,{"className":"token operator","children":"<"}]," Formula\n"]}],["$","span",null,{"className":"code-line","children":["  desc ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  homepage ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  url ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"https://example.com/foo-0.1.tar.gz\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  sha256 ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"0048002955d674583b0b7b05771a81341e2a5a15e2e4e9fb09c11814f984b617\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  license ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  depends_on ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"go\""}]}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token symbol","children":":build"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"def"}]," ",["$","span",null,{"className":"token method-definition","children":["$","span",null,{"className":"token function","children":"install"}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# ENV.deparallelize  # if your formula fails when building in parallel"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    system ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"go\""}]}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"build\""}]}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token operator","children":"*"}],"std_go_args",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token symbol","children":"ldflags"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"-s -w\""}]}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"end"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  test ",["$","span",null,{"className":"token keyword","children":"do"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# `test do` will create, run in and delete a temporary directory."}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"#"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# This test will fail and we won't accept that! For Homebrew/homebrew-core"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# this will need to be a test that verifies the functionality of the"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# software. Run the test with `brew test telegram-downloader`. Options passed"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# to `brew install` such as `--HEAD` also need to be provided to `brew test`."}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"#"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# The installed folder is not in the path, so use the entire path to any"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# executables being tested: `system \"#{bin}/program\", \"do\", \"something\"`."}],"\n"]}],["$","span",null,{"className":"code-line","children":["    system ",["$","span",null,{"className":"token string-literal","children":["$","span",null,{"className":"token string","children":"\"false\""}]}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"end"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"end"}],"\n"]}]]}]}],["$","p",null,{"children":["使用 ",["$","code",null,{"children":"go build"}]," 命令编译完成后，Homebrew 会把编译后的文件复制到 ",["$","code",null,{"children":"$$(brew --cellar)"}]," 目录下，并且在系统的 ",["$","code",null,{"children":"PATH"}]," 下建立相应的符号连接。"]}],["$","h2",null,{"id":"发布-formula","children":[["$","a",null,{"href":"#发布-formula","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"发布 Formula"]}],["$","p",null,{"children":"在 Homebrew 上发布包的完整步骤其实就是"}],["$","ol",null,{"children":[["$","li",null,{"children":["在 Github 上 Fork ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/Homebrew/homebrew-core","children":"homebrew-core"}]]}],["$","li",null,{"children":["在 ",["$","code",null,{"children":"homebrew-core/Formula/"}]," 文件夹中添加新的 Formula"]}],["$","li",null,{"children":"发起 Pull Request 请求并且等待通过"}]]}],["$","p",null,{"children":"不过，为了方便 Formula 的生成和更新，以及确保编译安装过程没有错误，Homebrew 提供了一些命令和方法。"}],["$","p",null,{"children":"例如刚刚提到的"}],["$","$L11",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":["brew create ",["$","span",null,{"className":"token operator","children":"<"}],"URL",["$","span",null,{"className":"token operator","children":">"}],"\n"]}]}]}],["$","p",null,{"children":"可以快速的创建 Formula 模板。"}],["$","$L11",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":["brew audit --new-formula ",["$","span",null,{"className":"token operator","children":"<"}],"formula",["$","span",null,{"className":"token operator","children":">"}]," tests\n"]}]}]}],["$","p",null,{"children":"用来测试新建的 Formula 是否满足要求。"}],["$","$L11",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":"brew bump-formula-pr\n"}]}]}],["$","p",null,{"children":"则是用来更新已经存在的 Formula。"}],["$","hr",null,{}],["$","h2",null,{"id":"参考资料","children":[["$","a",null,{"href":"#参考资料","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"参考资料"]}],["$","ol",null,{"children":[["$","li",null,{"children":["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.brew.sh/Adding-Software-to-Homebrew","children":"Adding Software To Homebrew"}]}],["$","li",null,{"children":["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.brew.sh/Manpage#create-options-url","children":"brew(1) – The Missing Package Manager for macOS (or Linux)"}]}],["$","li",null,{"children":["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.brew.sh/Formula-Cookbook","children":"Formula Cookbook"}]}],["$","li",null,{"children":["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.brew.sh/How-To-Open-a-Homebrew-Pull-Request#formulae-related-pull-request","children":"How to Open a Homebrew Pull Request"}]}]]}]]}],["$","div",null,{"className":"pb-6 pt-6 text-center text-gray-700 dark:text-gray-300","id":"comment","children":["$","$L12",null,{"slug":"homebrew-formula-contribution"}]}]]}],["$","footer",null,{"children":[["$","div",null,{"className":"divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y","children":[["$","div",null,{"className":"py-4 xl:py-8","children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Tags"}],["$","div",null,{"className":"flex flex-wrap","children":[["$","$L9",null,{"href":"/tags/macos","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"macos"}],["$","$L9",null,{"href":"/tags/homebrew","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"homebrew"}],["$","$L9",null,{"href":"/tags/github","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"github"}]]}]]}],["$","div",null,{"className":"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8","children":[["$","div",null,{"children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Previous Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L9",null,{"href":"/blog/systemd-incomplete-guide","children":"Systemd 使用不完全指北"}]}]]}],"$undefined"]}]]}],["$","div",null,{"className":"pt-4 xl:pt-8","children":["$","$L9",null,{"href":"/blog","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","aria-label":"Back to the blog","children":"← Back to the blog"}]}]]}]]}]]}]}]]}]]
e:null
