<!DOCTYPE html><html lang="en-us" class="__variable_8c5df3 scroll-smooth"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/560d0dc937e89811-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/da21dbc9c9b01f89.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/3b2379318c31443c.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-41da6fc3839e1ae4.js" as="script"/><link rel="preload" href="/_next/static/chunks/fd9d1056-3a33dcaeb8d53e3c.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-58227000ca6846a8.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-app-225a286ca2c1df01.js" as="script"/><link rel="preload" as="script" href="https://analytics.umami.is/script.js"/><title>Python 多进程并发执行 | 窠臼.blog</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><link rel="canonical" href="https://tailwind-nextjs-starter-blog.vercel.app/blog/python-multiprocessing"/><link rel="alternate" type="application/rss+xml" href="https://tailwind-nextjs-starter-blog.vercel.app/feed.xml"/><meta property="og:title" content="Python 多进程并发执行"/><meta property="og:url" content="https://tailwind-nextjs-starter-blog.vercel.app/blog/python-multiprocessing"/><meta property="og:site_name" content="窠臼.blog"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2016-01-28T00:00:00.000Z"/><meta property="article:modified_time" content="2017-07-26T00:00:00.000Z"/><meta property="article:author" content="thekoc"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Python 多进程并发执行"/><meta name="next-size-adjust"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-950 dark:text-white"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between font-sans"><header class="flex items-center justify-between py-10"><div><a aria-label="窠臼.blog" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"><path d="M7.45 41.676h27.5v-9H7.45Zm0 0" style="stroke:none;fill-rule:evenodd;fill:#2e3440;fill-opacity:1"></path><path d="M16 34.023h27.5v-9H16Zm0 0" style="stroke:none;fill-rule:evenodd;fill:#f5efda;fill-opacity:1"></path><path d="M6.5 29.074H34v-9H6.5Zm0 0" style="stroke:none;fill-rule:evenodd;fill:#679b49;fill-opacity:1"></path><path d="M16 21.398h27.5v-9H16Zm0 0" style="stroke:none;fill-rule:evenodd;fill:#f08d42;fill-opacity:1"></path><path d="M10.2 24h27.5v-9H10.2Zm0 0" style="stroke:none;fill-rule:evenodd;fill:#f6d21e;fill-opacity:1"></path></svg></div><div class="h-6 text-2xl font-semibold sm:block">窠臼.blog</div></div></a></div><div class="flex items-center leading-5 space-x-4 sm:space-x-6"><a class="hidden sm:block font-medium text-gray-900 dark:text-gray-100" href="/blog">All</a><a class="hidden sm:block font-medium text-gray-900 dark:text-gray-100" href="/tags">Tags</a><a class="hidden sm:block font-medium text-gray-900 dark:text-gray-100" href="/about">About</a><button aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="text-gray-900 dark:text-gray-100 h-6 w-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg></button><button aria-label="Toggle Menu" class="sm:hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100 h-8 w-8"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed left-0 top-0 z-10 h-full w-full transform opacity-95 dark:opacity-[0.98] bg-white duration-300 ease-in-out dark:bg-gray-950 translate-x-full"><div class="flex justify-end"><button class="mr-8 mt-11 h-8 w-8" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/">Home</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">All</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></header><main class="mb-auto"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Python 多进程并发执行","datePublished":"2016-01-28T00:00:00.000Z","dateModified":"2017-07-26T00:00:00.000Z","description":"","url":"https://tailwind-nextjs-starter-blog.vercel.app/blog/python-multiprocessing","author":[{"@type":"Person","name":"thekoc"}]}</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed bottom-8 right-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2016-01-28T00:00:00.000Z">Thursday, January 28, 2016</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Python 多进程并发执行</h1></div></div></header><div class="grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0"><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img src="/static/images/avatar.jpg" width="38" height="38" alt="avatar" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">thekoc</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://github.com/thekoc" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400">@thekoc</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pb-8 pt-10 dark:prose-invert"><h2 id="动机"><a href="#动机" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>动机</h2><p>由于 Python 的 GIL 限制，多线程并不能提高 CPU 密集型任务的执行效率。这时候我们可以用多进程来提高效率。</p><h2 id="基本多进程"><a href="#基本多进程" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>基本多进程</h2><div class="relative"><pre><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process
</span><span class="code-line">p <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>run_proc<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> etc<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">p<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">p<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code></pre></div><p>最为直接的多进程执行方式，但是无法很好的控制进程数量。</p><h2 id="进程池"><a href="#进程池" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>进程池：</h2><div class="relative"><pre><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">import</span> multiprocessing
</span><span class="code-line">manager <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Manager<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">queue <span class="token operator">=</span> manager<span class="token punctuation">.</span>Queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">pool <span class="token operator">=</span> multiprocessing<span class="token punctuation">.</span>Pool<span class="token punctuation">(</span>number_of_workers<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>number_of_workers<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    pool<span class="token punctuation">.</span>apply_async<span class="token punctuation">(</span>func<span class="token punctuation">,</span> <span class="token punctuation">(</span>queue<span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code></pre></div><p>进程通过队列进行通信，进程池中的进程数量也可以控制。</p><h2 id="map"><a href="#map" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>map</h2><div class="relative"><pre><code class="language-python code-highlight"><span class="code-line"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Pool
</span><span class="code-line"><span class="token comment"># from multiprocessing.dummy import Pool as ThreadPool</span>
</span><span class="code-line">pool <span class="token operator">=</span> Pool<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment"># Sets the pool size to 4</span>
</span><span class="code-line">results <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> argvs<span class="token punctuation">)</span>
</span><span class="code-line">pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> 
</span><span class="code-line">pool<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code></pre></div><p>如果进程之间无需通信，可以使用 map 函数。</p><h2 id="进程间通信"><a href="#进程间通信" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>进程间通信</h2><div class="relative"><pre><code class="language-python code-highlight"><span class="code-line"><span class="token comment"># For Process</span>
</span><span class="code-line"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Queue
</span><span class="code-line"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> Process
</span><span class="code-line">q <span class="token operator">=</span> Queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">pw <span class="token operator">=</span> Process<span class="token punctuation">(</span>target<span class="token operator">=</span>func<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> etc<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token comment"># ...</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># In func</span>
</span><span class="code-line"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> etc<span class="token punctuation">)</span><span class="token punctuation">:</span>
</span><span class="code-line">    q<span class="token punctuation">.</span>put<span class="token punctuation">(</span>var<span class="token punctuation">)</span>
</span><span class="code-line">    q<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    
</span><span class="code-line">    
</span><span class="code-line"><span class="token comment"># For Pool</span>
</span><span class="code-line"><span class="token keyword">from</span> multiprocesing <span class="token keyword">import</span> Manager
</span><span class="code-line">q <span class="token operator">=</span> Manager<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Queue<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code></pre></div></div><div class="pb-6 pt-6 text-center text-gray-700 dark:text-gray-300" id="comment"><button>Load Comments</button></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/python">python</a><a class="mr-3 text-sm font-medium text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/multiprocessing">multiprocessing</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/crontab-basic-usage">crontab 用法及注意事项</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" aria-label="Back to the blog" href="/blog">← Back to the blog</a></div></footer></div></div></article></section></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>thekoc</div><div> • </div><div>© 2023</div><div> • </div><a href="/">窠臼.blog</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><div>Based on <a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tails Azimuth&#x27;s project.</a></div></div></div></footer></div></section><script src="/_next/static/chunks/webpack-41da6fc3839e1ae4.js" async=""></script><script src="/_next/static/chunks/fd9d1056-3a33dcaeb8d53e3c.js" async=""></script><script src="/_next/static/chunks/596-58227000ca6846a8.js" async=""></script><script src="/_next/static/chunks/main-app-225a286ca2c1df01.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/560d0dc937e89811-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/da21dbc9c9b01f89.css\",{\"as\":\"style\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:HL[\"/_next/static/css/3b2379318c31443c.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"5:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-41da6fc3839e1ae4.js\",\"971:static/chunks/fd9d1056-3a33dcaeb8d53e3c.js\",\"596:static/chunks/596-58227000ca6846a8.js\"],\"name\":\"default\",\"async\":false}\n7:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-41da6fc3839e1ae4.js\",\"971:static/chunks/fd9d1056-3a33dcaeb8d53e3c.js\",\"596:static/chunks/596-58227000ca6846a8.js\"],\"name\":\"GlobalError\",\"async\":false}\n8:I{\"id\":8464,\"chunks\":[\"685:static/chunks/685-3720320f1c2a7834.js\",\"504:static/chunks/504-36106b7d89c4e124.js\","])</script><script>self.__next_f.push([1,"\"185:static/chunks/app/layout-357f4f53791008e5.js\"],\"name\":\"ThemeProviders\",\"async\":false}\n9:I{\"id\":3015,\"chunks\":[\"685:static/chunks/685-3720320f1c2a7834.js\",\"504:static/chunks/504-36106b7d89c4e124.js\",\"185:static/chunks/app/layout-357f4f53791008e5.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":3657,\"chunks\":[\"685:static/chunks/685-3720320f1c2a7834.js\",\"504:static/chunks/504-36106b7d89c4e124.js\",\"185:static/chunks/app/layout-357f4f53791008e5.js\"],\"name\":\"KBarSearchProvider\",\"async\":false}\nb:I{\"id\":6685,\"chunks\":[\""])</script><script>self.__next_f.push([1,"685:static/chunks/685-3720320f1c2a7834.js\",\"797:static/chunks/app/blog/[...slug]/page-950f9fa0e3ada0ab.js\"],\"name\":\"\",\"async\":false}\nc:I{\"id\":7005,\"chunks\":[\"685:static/chunks/685-3720320f1c2a7834.js\",\"504:static/chunks/504-36106b7d89c4e124.js\",\"185:static/chunks/app/layout-357f4f53791008e5.js\"],\"name\":\"KBarButton\",\"async\":false}\nd:I{\"id\":6914,\"chunks\":[\"685:static/chunks/685-3720320f1c2a7834.js\",\"504:static/chunks/504-36106b7d89c4e124.js\",\"185:static/chunks/app/layout-357f4f53791008e5.js\"],\"name\":\"\",\"async"])</script><script>self.__next_f.push([1,"\":false}\ne:I{\"id\":8766,\"chunks\":[\"685:static/chunks/685-3720320f1c2a7834.js\",\"504:static/chunks/504-36106b7d89c4e124.js\",\"185:static/chunks/app/layout-357f4f53791008e5.js\"],\"name\":\"\",\"async\":false}\nf:I{\"id\":7767,\"chunks\":[\"272:static/chunks/webpack-41da6fc3839e1ae4.js\",\"971:static/chunks/fd9d1056-3a33dcaeb8d53e3c.js\",\"596:static/chunks/596-58227000ca6846a8.js\"],\"name\":\"default\",\"async\":false}\n10:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-41da6fc3839e1ae4.js\",\"971:static/chunks/fd9d1056-3a33dcaeb8d53e3"])</script><script>self.__next_f.push([1,"c.js\",\"596:static/chunks/596-58227000ca6846a8.js\"],\"name\":\"default\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/da21dbc9c9b01f89.css\",\"precedence\":\"next\"}]],[\"$\",\"$L5\",null,{\"buildId\":\"mvqaWM93et1Ack-i2CSEb\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/python-multiprocessing\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"python-multiprocessing\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"python-multiprocessing\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L6\",\"globalErrorComponent\":\"$7\",\"children\":[[\"$\",\"html\",null,{\"lang\":\"en-us\",\"className\":\"__variable_8c5df3 scroll-smooth\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"76x76\",\"href\":\"/static/favicons/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/static/favicons/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/static/favicons/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/static/favicons/site.webmanifest\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: light)\",\"content\":\"#fff\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: dark)\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}],[\"$\",\"body\",null,{\"className\":\"bg-white text-black antialiased dark:bg-gray-950 dark:text-white\",\"children\":[\"$\",\"$L8\",null,{\"children\":[[\"$undefined\",\"$undefined\",\"$undefined\",[\"$\",\"$L9\",null,{\"async\":true,\"defer\":true,\"data-website-id\":\"$undefined\",\"src\":\"https://analytics.umami.is/script.js\"}],\"$undefined\"],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex h-screen flex-col justify-between font-sans\",\"children\":[[\"$\",\"$La\",null,{\"kbarConfig\":{\"searchDocumentsPath\":\"search.json\"},\"children\":[[\"$\",\"header\",null,{\"className\":\"flex items-center justify-between py-10\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/\",\"aria-label\":\"窠臼.blog\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mr-3\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":50,\"height\":50,\"children\":[[\"$\",\"path\",null,{\"d\":\"M7.45 41.676h27.5v-9H7.45Zm0 0\",\"style\":{\"stroke\":\"none\",\"fillRule\":\"evenodd\",\"fill\":\"#2e3440\",\"fillOpacity\":1}}],[\"$\",\"path\",null,{\"d\":\"M16 34.023h27.5v-9H16Zm0 0\",\"style\":{\"stroke\":\"none\",\"fillRule\":\"evenodd\",\"fill\":\"#f5efda\",\"fillOpacity\":1}}],[\"$\",\"path\",null,{\"d\":\"M6.5 29.074H34v-9H6.5Zm0 0\",\"style\":{\"stroke\":\"none\",\"fillRule\":\"evenodd\",\"fill\":\"#679b49\",\"fillOpacity\":1}}],[\"$\",\"path\",null,{\"d\":\"M16 21.398h27.5v-9H16Zm0 0\",\"style\":{\"stroke\":\"none\",\"fillRule\":\"evenodd\",\"fill\":\"#f08d42\",\"fillOpacity\":1}}],[\"$\",\"path\",null,{\"d\":\"M10.2 24h27.5v-9H10.2Zm0 0\",\"style\":{\"stroke\":\"none\",\"fillRule\":\"evenodd\",\"fill\":\"#f6d21e\",\"fillOpacity\":1}}]]}]}],[\"$\",\"div\",null,{\"className\":\"h-6 text-2xl font-semibold sm:block\",\"children\":\"窠臼.blog\"}]]}]}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center leading-5 space-x-4 sm:space-x-6\",\"children\":[[[\"$\",\"$Lb\",null,{\"href\":\"/blog\",\"className\":\"hidden sm:block font-medium text-gray-900 dark:text-gray-100\",\"children\":\"All\"}],[\"$\",\"$Lb\",null,{\"href\":\"/tags\",\"className\":\"hidden sm:block font-medium text-gray-900 dark:text-gray-100\",\"children\":\"Tags\"}],[\"$\",\"$Lb\",null,{\"href\":\"/about\",\"className\":\"hidden sm:block font-medium text-gray-900 dark:text-gray-100\",\"children\":\"About\"}]],[\"$\",\"$Lc\",null,{\"aria-label\":\"Search\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"strokeWidth\":1.5,\"stroke\":\"currentColor\",\"className\":\"text-gray-900 dark:text-gray-100 h-6 w-6\",\"children\":[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"d\":\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z\"}]}]}],[\"$\",\"$Ld\",null,{}],[\"$\",\"$Le\",null,{}]]}]]}],[\"$\",\"main\",null,{\"className\":\"mb-auto\",\"children\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-x-2 pb-8 pt-6 md:space-y-5\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14\",\"children\":\"404\"}]}],[\"$\",\"div\",null,{\"className\":\"max-w-md\",\"children\":[[\"$\",\"p\",null,{\"className\":\"mb-4 text-xl font-bold leading-normal md:text-2xl\",\"children\":\"Sorry we couldn't find this page.\"}],[\"$\",\"p\",null,{\"className\":\"mb-8\",\"children\":\"But dont worry, you can find plenty of other things on our homepage.\"}],[\"$\",\"$Lb\",null,{\"href\":\"/\",\"className\":\"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500\",\"children\":\"Back to homepage\"}]]}]]}],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$Lf\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",[\"slug\",\"python-multiprocessing\",\"c\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L10\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$L11\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":[\\\"python-multiprocessing\\\"]}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3b2379318c31443c.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"slug\",\"python-multiprocessing\",\"c\"]},\"styles\":[]}],\"segment\":\"blog\"},\"styles\":[]}]}]]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"mt-16 flex flex-col items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400\",\"children\":[[\"$\",\"div\",null,{\"children\":\"thekoc\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"div\",null,{\"children\":\"© 2023\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"$Lb\",null,{\"href\":\"/\",\"children\":\"窠臼.blog\"}]]}],[\"$\",\"div\",null,{\"className\":\"mb-8 text-sm text-gray-500 dark:text-gray-400\",\"children\":[\"$\",\"div\",null,{\"children\":[\"Based on \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/timlrx/tailwind-nextjs-starter-blog\",\"children\":\"Tails Azimuth's project.\"}]]}]}]]}]}]]}]}]]}]}]]}],null]}]]\n"])</script><script>self.__next_f.push([1,"12:I{\"id\":2630,\"chunks\":[\"685:static/chunks/685-3720320f1c2a7834.js\",\"797:static/chunks/app/blog/[...slug]/page-950f9fa0e3ada0ab.js\"],\"name\":\"\",\"async\":false}\n13:I{\"id\":2529,\"chunks\":[\"685:static/chunks/685-3720320f1c2a7834.js\",\"797:static/chunks/app/blog/[...slug]/page-950f9fa0e3ada0ab.js\"],\"name\":\"\",\"async\":false}\n14:I{\"id\":5940,\"chunks\":[\"685:static/chunks/685-3720320f1c2a7834.js\",\"797:static/chunks/app/blog/[...slug]/page-950f9fa0e3ada0ab.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"BlogPosting\\\",\\\"headline\\\":\\\"Python 多进程并发执行\\\",\\\"datePublished\\\":\\\"2016-01-28T00:00:00.000Z\\\",\\\"dateModified\\\":\\\"2017-07-26T00:00:00.000Z\\\",\\\"description\\\":\\\"\\\",\\\"url\\\":\\\"https://tailwind-nextjs-starter-blog.vercel.app/blog/python-multiprocessing\\\",\\\"author\\\":[{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"thekoc\\\"}]}\"}}],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[[\"$\",\"$L12\",null,{}],[\"$\",\"article\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700\",\"children\":[[\"$\",\"header\",null,{\"className\":\"pt-6 xl:pb-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"space-y-1 text-center\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"space-y-10\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Published on\"}],[\"$\",\"dd\",null,{\"className\":\"text-base font-medium leading-6 text-gray-500 dark:text-gray-400\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2016-01-28T00:00:00.000Z\",\"children\":\"Thursday, January 28, 2016\"}]}]]}]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"h1\",null,{\"className\":\"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14\",\"children\":\"Python 多进程并发执行\"}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Authors\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"ul\",null,{\"className\":\"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8\",\"children\":[[\"$\",\"li\",\"thekoc\",{\"className\":\"flex items-center space-x-2\",\"children\":[[\"$\",\"img\",null,{\"src\":\"/static/images/avatar.jpg\",\"width\":38,\"height\":38,\"alt\":\"avatar\",\"className\":\"h-10 w-10 rounded-full\"}],[\"$\",\"dl\",null,{\"className\":\"whitespace-nowrap text-sm font-medium leading-5\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Name\"}],[\"$\",\"dd\",null,{\"className\":\"text-gray-900 dark:text-gray-100\",\"children\":\"thekoc\"}],[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Twitter\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/thekoc\",\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"@thekoc\"}]}]]}]]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"prose max-w-none pb-8 pt-10 dark:prose-invert\",\"children\":[[\"$\",\"h2\",null,{\"id\":\"动机\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#动机\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"动机\"]}],[\"$\",\"p\",null,{\"children\":\"由于 Python 的 GIL 限制，多线程并不能提高 CPU 密集型任务的执行效率。这时候我们可以用多进程来提高效率。\"}],[\"$\",\"h2\",null,{\"id\":\"基本多进程\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#基本多进程\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"基本多进程\"]}],[\"$\",\"$L13\",null,{\"className\":\"language-python\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-python code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" multiprocessing \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" Process\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"p \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" Process\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"target\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"run_proc\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" args\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"arg1\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" arg2\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" etc\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"p\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"start\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"p\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"join\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":\"最为直接的多进程执行方式，但是无法很好的控制进程数量。\"}],[\"$\",\"h2\",null,{\"id\":\"进程池\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#进程池\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"进程池：\"]}],[\"$\",\"$L13\",null,{\"className\":\"language-python\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-python code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" multiprocessing\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"manager \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" multiprocessing\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Manager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"queue \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" manager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Queue\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"pool \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" multiprocessing\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Pool\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"number_of_workers\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"for\"}],\" i \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"in\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"range\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"number_of_workers\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    pool\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"apply_async\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"func\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"queue\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"pool\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"close\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"pool\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"join\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":\"进程通过队列进行通信，进程池中的进程数量也可以控制。\"}],[\"$\",\"h2\",null,{\"id\":\"map\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#map\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"map\"]}],[\"$\",\"$L13\",null,{\"className\":\"language-python\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-python code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" multiprocessing \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" Pool\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# from multiprocessing.dummy import Pool as ThreadPool\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"pool \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" Pool\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"4\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# Sets the pool size to 4\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"results \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" pool\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"map\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"func\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" argvs\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"pool\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"close\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"pool\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"join\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":\"如果进程之间无需通信，可以使用 map 函数。\"}],[\"$\",\"h2\",null,{\"id\":\"进程间通信\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#进程间通信\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"进程间通信\"]}],[\"$\",\"$L13\",null,{\"className\":\"language-python\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-python code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# For Process\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" multiprocessing \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" Queue\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" multiprocessing \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" Process\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"q \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" Queue\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"pw \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" Process\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"target\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"func\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" args\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"q\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" arg1\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" etc\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# ...\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# In func\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"def\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"func\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"q\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" arg1\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" etc\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    q\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"put\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"var\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    q\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"get\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# For Pool\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" multiprocesing \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" Manager\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"q \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" Manager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Queue\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"pb-6 pt-6 text-center text-gray-700 dark:text-gray-300\",\"id\":\"comment\",\"children\":[\"$\",\"$L14\",null,{\"slug\":\"python-multiprocessing\"}]}]]}],[\"$\",\"footer\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y\",\"children\":[[\"$\",\"div\",null,{\"className\":\"py-4 xl:py-8\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Tags\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap\",\"children\":[[\"$\",\"$Lb\",null,{\"href\":\"/tags/python\",\"className\":\"mr-3 text-sm font-medium text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"python\"}],[\"$\",\"$Lb\",null,{\"href\":\"/tags/multiprocessing\",\"className\":\"mr-3 text-sm font-medium text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"multiprocessing\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8\",\"children\":[\"$undefined\",[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Next Article\"}],[\"$\",\"div\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/blog/crontab-basic-usage\",\"children\":\"crontab 用法及注意事项\"}]}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"pt-4 xl:pt-8\",\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/blog\",\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"aria-label\":\"Back to the blog\",\"children\":\"← Back to the blog\"}]}]]}]]}]]}]}]]}]]\n"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Python 多进程并发执行 | 窠臼.blog\"}],[\"$\",\"meta\",\"2\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"3\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"4\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"link\",\"5\",{\"rel\":\"canonical\",\"href\":\"https://tailwind-nextjs-starter-blog.vercel.app/blog/python-multiprocessing\"}],[\"$\",\"link\",\"6\",{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"https://tailwind-nextjs-starter-blog.vercel.app/feed.xml\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:title\",\"content\":\"Python 多进程并发执行\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:url\",\"content\":\"https://tailwind-nextjs-starter-blog.vercel.app/blog/python-multiprocessing\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:site_name\",\"content\":\"窠臼.blog\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"12\",{\"property\":\"article:published_time\",\"content\":\"2016-01-28T00:00:00.000Z\"}],[\"$\",\"meta\",\"13\",{\"property\":\"article:modified_time\",\"content\":\"2017-07-26T00:00:00.000Z\"}],[\"$\",\"meta\",\"14\",{\"property\":\"article:author\",\"content\":\"thekoc\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:title\",\"content\":\"Python 多进程并发执行\"}],[\"$\",\"meta\",\"17\",{\"name\":\"next-size-adjust\"}]]\n"])</script></body></html>