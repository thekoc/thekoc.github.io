1:HL["/_next/static/media/2d141e1a38819612-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/_next/static/css/07cc5756ac5bd00f.css",{"as":"style"}]
0:["Wt7vpKvlZgwcj5cSGfJWi",[[["",{"children":["blog",{"children":[["slug","github-actions","c"],{"children":["__PAGE__?{\"slug\":[\"github-actions\"]}",{}]}]}]},"$undefined","$undefined",true],"$L3",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/07cc5756ac5bd00f.css","precedence":"next"}]],"$L4"]]]]
5:HL["/_next/static/css/dbc73c933534e0e3.css",{"as":"style"}]
6:I{"id":8464,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","771:static/chunks/771-35a7f5e6bc30df80.js","185:static/chunks/app/layout-f01836e259cfee1f.js"],"name":"ThemeProviders","async":false}
7:I{"id":3015,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","771:static/chunks/771-35a7f5e6bc30df80.js","185:static/chunks/app/layout-f01836e259cfee1f.js"],"name":"","async":false}
8:I{"id":367,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","771:static/chunks/771-35a7f5e6bc30df80.js","185:static/chunks/app/layout-f01836e259cfee1f.js"],"name":"KBarSearchProvider","async":false}
9:I{"id":6685,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","797:static/chunks/app/blog/[...slug]/page-af73ad6bf5b4fe05.js"],"name":"","async":false}
a:I{"id":6914,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","771:static/chunks/771-35a7f5e6bc30df80.js","185:static/chunks/app/layout-f01836e259cfee1f.js"],"name":"","async":false}
b:I{"id":8766,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","771:static/chunks/771-35a7f5e6bc30df80.js","185:static/chunks/app/layout-f01836e259cfee1f.js"],"name":"","async":false}
c:I{"id":7767,"chunks":["272:static/chunks/webpack-c40fc2d1c5532abf.js","971:static/chunks/fd9d1056-9dadb51d24d38e6a.js","596:static/chunks/596-23e3fe0546e216e4.js"],"name":"default","async":false}
d:I{"id":7920,"chunks":["272:static/chunks/webpack-c40fc2d1c5532abf.js","971:static/chunks/fd9d1056-9dadb51d24d38e6a.js","596:static/chunks/596-23e3fe0546e216e4.js"],"name":"default","async":false}
4:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"通过 GitHub Actions 自动化部署宇宙万物 | 窠臼.blog"}],["$","meta","2",{"name":"description","content":"如果你在也在使用 Github，那么你应该看看 Github Actions。"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","4",{"name":"robots","content":"index, follow"}],["$","meta","5",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","6",{"rel":"canonical","href":"https://tailwind-nextjs-starter-blog.vercel.app/blog/github-actions"}],["$","link","7",{"rel":"alternate","type":"application/rss+xml","href":"https://tailwind-nextjs-starter-blog.vercel.app/feed.xml"}],["$","meta","8",{"property":"og:title","content":"通过 GitHub Actions 自动化部署宇宙万物"}],["$","meta","9",{"property":"og:description","content":"如果你在也在使用 Github，那么你应该看看 Github Actions。"}],["$","meta","10",{"property":"og:url","content":"https://tailwind-nextjs-starter-blog.vercel.app/blog/github-actions"}],["$","meta","11",{"property":"og:site_name","content":"窠臼.blog"}],["$","meta","12",{"property":"og:locale","content":"en_US"}],["$","meta","13",{"property":"og:type","content":"article"}],["$","meta","14",{"property":"article:published_time","content":"2023-08-24T00:00:00.000Z"}],["$","meta","15",{"property":"article:modified_time","content":"2023-08-24T00:00:00.000Z"}],["$","meta","16",{"property":"article:author","content":"thekoc"}],["$","meta","17",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","18",{"name":"twitter:title","content":"通过 GitHub Actions 自动化部署宇宙万物"}],["$","meta","19",{"name":"twitter:description","content":"如果你在也在使用 Github，那么你应该看看 Github Actions。"}],["$","meta","20",{"name":"next-size-adjust"}]]
3:[null,["$","html",null,{"lang":"en-us","className":"__variable_641c3b scroll-smooth","suppressHydrationWarning":true,"children":[["$","link",null,{"rel":"apple-touch-icon","sizes":"76x76","href":"/static/favicons/apple-touch-icon.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/static/favicons/favicon-32x32.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/static/favicons/favicon-16x16.png"}],["$","link",null,{"rel":"manifest","href":"/static/favicons/site.webmanifest"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#000000"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#fff"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#000"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}],["$","body",null,{"className":"bg-white text-black antialiased dark:bg-gray-950 dark:text-white","children":["$","$L6",null,{"children":[["$undefined","$undefined","$undefined",["$","$L7",null,{"async":true,"defer":true,"data-website-id":"$undefined","src":"https://analytics.umami.is/script.js"}],"$undefined"],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":["$","div",null,{"className":"flex h-screen flex-col justify-between font-sans","children":[["$","$L8",null,{"kbarConfig":{"searchDocumentsPath":"search.json"},"children":[["$","header",null,{"className":"flex items-center justify-between py-10","children":[["$","div",null,{"children":["$","$L9",null,{"href":"/","aria-label":"窠臼.blog","children":["$","div",null,{"className":"flex items-center justify-between","children":[["$","div",null,{"className":"mr-3","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":50,"height":50,"children":[["$","path",null,{"d":"M7.45 41.676h27.5v-9H7.45Zm0 0","style":{"stroke":"none","fillRule":"evenodd","fill":"#2e3440","fillOpacity":1}}],["$","path",null,{"d":"M16 34.023h27.5v-9H16Zm0 0","style":{"stroke":"none","fillRule":"evenodd","fill":"#f5efda","fillOpacity":1}}],["$","path",null,{"d":"M6.5 29.074H34v-9H6.5Zm0 0","style":{"stroke":"none","fillRule":"evenodd","fill":"#679b49","fillOpacity":1}}],["$","path",null,{"d":"M16 21.398h27.5v-9H16Zm0 0","style":{"stroke":"none","fillRule":"evenodd","fill":"#f08d42","fillOpacity":1}}],["$","path",null,{"d":"M10.2 24h27.5v-9H10.2Zm0 0","style":{"stroke":"none","fillRule":"evenodd","fill":"#f6d21e","fillOpacity":1}}]]}]}],["$","div",null,{"className":"h-6 text-2xl font-semibold sm:block","children":"窠臼.blog"}]]}]}]}],["$","div",null,{"className":"flex items-center leading-5 space-x-4 sm:space-x-6","children":[[["$","$L9",null,{"href":"/blog","className":"hidden sm:block font-medium text-gray-900 dark:text-gray-100","children":"All"}],["$","$L9",null,{"href":"/tags","className":"hidden sm:block font-medium text-gray-900 dark:text-gray-100","children":"Tags"}],["$","$L9",null,{"href":"/about","className":"hidden sm:block font-medium text-gray-900 dark:text-gray-100","children":"About"}]],["$","$La",null,{}],["$","$Lb",null,{}]]}]]}],["$","main",null,{"className":"mb-auto","children":["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","notFound":["$","div",null,{"className":"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6","children":[["$","div",null,{"className":"space-x-2 pb-8 pt-6 md:space-y-5","children":["$","h1",null,{"className":"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14","children":"404"}]}],["$","div",null,{"className":"max-w-md","children":[["$","p",null,{"className":"mb-4 text-xl font-bold leading-normal md:text-2xl","children":"Sorry we couldn't find this page."}],["$","p",null,{"className":"mb-8","children":"But dont worry, you can find plenty of other things on our homepage."}],["$","$L9",null,{"href":"/","className":"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500","children":"Back to homepage"}]]}]]}],"notFoundStyles":[],"childProp":{"current":["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$Lc",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children",["slug","github-actions","c"],"children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$Ld",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Le","$Lf",null],"segment":"__PAGE__?{\"slug\":[\"github-actions\"]}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/dbc73c933534e0e3.css","precedence":"next"}]]}],"segment":["slug","github-actions","c"]},"styles":[]}],"segment":"blog"},"styles":[]}]}]]}],["$","footer",null,{"children":["$","div",null,{"className":"mt-16 flex flex-col items-center","children":[["$","div",null,{"className":"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400","children":[["$","div",null,{"children":"thekoc"}],["$","div",null,{"children":" • "}],["$","div",null,{"children":"© 2023"}],["$","div",null,{"children":" • "}],["$","$L9",null,{"href":"/","children":"窠臼.blog"}]]}],["$","div",null,{"className":"mb-8 text-sm text-gray-500 dark:text-gray-400","children":["$","div",null,{"children":["Based on ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/timlrx/tailwind-nextjs-starter-blog","children":"Tails Azimuth's project."}]]}]}]]}]}]]}]}]]}]}]]}],null]
10:I{"id":2630,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","797:static/chunks/app/blog/[...slug]/page-af73ad6bf5b4fe05.js"],"name":"","async":false}
11:I{"id":2529,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","797:static/chunks/app/blog/[...slug]/page-af73ad6bf5b4fe05.js"],"name":"","async":false}
12:I{"id":5940,"chunks":["685:static/chunks/685-5dfb8b7ad7f20b97.js","797:static/chunks/app/blog/[...slug]/page-af73ad6bf5b4fe05.js"],"name":"","async":false}
f:[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"通过 GitHub Actions 自动化部署宇宙万物\",\"datePublished\":\"2023-08-24T00:00:00.000Z\",\"dateModified\":\"2023-08-24T00:00:00.000Z\",\"description\":\"如果你在也在使用 Github，那么你应该看看 Github Actions。\",\"url\":\"https://tailwind-nextjs-starter-blog.vercel.app/blog/github-actions\",\"author\":[{\"@type\":\"Person\",\"name\":\"thekoc\"}]}"}}],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":[["$","$L10",null,{}],["$","article",null,{"children":["$","div",null,{"className":"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700","children":[["$","header",null,{"className":"pt-6 xl:pb-6","children":["$","div",null,{"className":"space-y-1 text-center","children":[["$","dl",null,{"className":"space-y-10","children":["$","div",null,{"children":[["$","dt",null,{"className":"sr-only","children":"Published on"}],["$","dd",null,{"className":"text-base font-medium leading-6 text-gray-500 dark:text-gray-400","children":["$","time",null,{"dateTime":"2023-08-24T00:00:00.000Z","children":"Thursday, August 24, 2023"}]}]]}]}],["$","div",null,{"children":["$","h1",null,{"className":"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14","children":"通过 GitHub Actions 自动化部署宇宙万物"}]}]]}]}],["$","div",null,{"className":"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0","children":[["$","dl",null,{"className":"pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700","children":[["$","dt",null,{"className":"sr-only","children":"Authors"}],["$","dd",null,{"children":["$","ul",null,{"className":"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8","children":[["$","li","thekoc",{"className":"flex items-center space-x-2","children":[["$","img",null,{"src":"/static/images/avatar.jpg","width":38,"height":38,"alt":"avatar","className":"h-10 w-10 rounded-full"}],["$","dl",null,{"className":"whitespace-nowrap text-sm font-medium leading-5","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"className":"text-gray-900 dark:text-gray-100","children":"thekoc"}],["$","dt",null,{"className":"sr-only","children":"Twitter"}],["$","dd",null,{"children":["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/thekoc","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"@thekoc"}]}]]}]]}]]}]}]]}],["$","div",null,{"className":"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0","children":[["$","div",null,{"className":"prose max-w-none pb-8 pt-10 dark:prose-invert","children":[["$","h2",null,{"id":"github-actions-何者也","children":[["$","a",null,{"href":"#github-actions-何者也","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"GitHub Actions 何者也"]}],["$","p",null,{"children":"让我们先看看官方的说法："}],["$","blockquote",null,{"children":["$","p",null,{"children":"GitHub Actions 是一种持续集成和持续交付 (CI/CD) 平台，可用于自动执行生成、测试和部署管道。 您可以创建工作流程来构建和测试存储库的每个拉取请求，或将合并的拉取请求部署到生产环境。"}]}],["$","p",null,{"children":"这听起来好像不太像人话，简单来说就是 GitHub Actions 可以监听 GitHub 上发生的事件并自动执行用户设定的操作。"}],["$","p",null,{"children":"例如：当你提交代码到 GitHub 时，GitHub Actions 就自动帮你运行测试，如果测试失败，就给你发送一封邮件。"}],["$","p",null,{"children":["请注意，在这里你可以根据事件来执行",["$","strong",null,{"children":"任意"}],"的命令，虽然 GitHub 提供给你的是一个虚拟容器，但是在使用时，你可以把它当作一台全功能的主机。也就是说你可以用它来部署任何框架，任何语言。据说甚至还有有人尝试利用 GitHub Actions 来挖矿。"]}],["$","p",null,{"children":"虽然（不出意外的）官方不建议这种用法，但是这也说明了 GitHub Actions 的无限可能性。"}],["$","p",null,{"children":["$","img",null,{"alt":"","src":"https://docs.github.com/assets/cb-25535/mw-1440/images/help/actions/overview-actions-simple.webp"}]}],["$","p",null,{"children":["GitHub Actions 基于此还扩展了许多其他的功能，例如矩阵构建（Matrix builds），实时日志，容器化构建，第三方云服务厂商集成等等。详细内容可以通过 Github 的",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions","children":"官方文档"}]," 来了解。"]}],["$","p",null,{"children":"问题来了，既然要部署宇宙万物，那么肯定就要有一台机器或者虚拟化容器 24 小时不间断运行 —— 这笔钱谁来出？好消息是，对于所有公开的仓库，GitHub Actions 都是免费的（有一些限制），对于私有仓库，每月有 2000 分钟的免费额度，超过部分按量收费。"}],["$","p",null,{"children":["免费使用的限制如下表",["$","sup",null,{"children":["$","a",null,{"href":"#user-content-fn-1","aria-describedby":"footnote-label","data-footnote-ref":true,"id":"user-content-fnref-1","children":"1"}]}],"："]}],["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"align":"left","children":"GitHub plan"}],["$","th",null,{"align":"left","children":"Total concurrent jobs"}],["$","th",null,{"align":"left","children":"Maximum concurrent macOS jobs"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"align":"left","children":"Free"}],["$","td",null,{"align":"left","children":"20"}],["$","td",null,{"align":"left","children":"5"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"left","children":"Pro"}],["$","td",null,{"align":"left","children":"40"}],["$","td",null,{"align":"left","children":"5"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"left","children":"Team"}],["$","td",null,{"align":"left","children":"60"}],["$","td",null,{"align":"left","children":"5"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"left","children":"Enterprise"}],["$","td",null,{"align":"left","children":"500"}],["$","td",null,{"align":"left","children":"50"}]]}]]}]]}],["$","p",null,{"children":"对于个人开发者来说，这个限制应该是远远够用的。"}],["$","h2",null,{"id":"基本使用","children":[["$","a",null,{"href":"#基本使用","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"基本使用"]}],["$","p",null,{"children":["由于和 Github 深度集成，GitHub Actions 用起来非常方便，只需要在仓库的 ",["$","code",null,{"children":".github/workflows"}]," 目录下创建一个 ",["$","code",null,{"children":"*.yml"}]," 配置文件就大功告成，GitHub 会自动启动这个 ",["$","code",null,{"children":"workflow"}]," 并且开始监听事件。"]}],["$","p",null,{"children":["例如我们在仓库的路径",["$","code",null,{"children":".github/workflows/hello-world.yml"}],"创建一个基本的 ",["$","code",null,{"children":"workflow"}],"。"]}],["$","$L11",null,{"className":"language-yml","children":["$","code",null,{"className":"language-yml code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"name"}],["$","span",null,{"className":"token punctuation","children":":"}]," GitHub Actions Demo\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"run-name"}],["$","span",null,{"className":"token punctuation","children":":"}]," Hello world from $",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"{"}]," github.actor ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"on"}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"push",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"jobs"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"Hello-World-Action"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"runs-on"}],["$","span",null,{"className":"token punctuation","children":":"}]," ubuntu",["$","span",null,{"className":"token punctuation","children":"-"}],"latest\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"steps"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"run"}],["$","span",null,{"className":"token punctuation","children":":"}]," echo \"Hello world on OS $",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"{"}]," runner.os ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"}"}],"\"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"run"}],["$","span",null,{"className":"token punctuation","children":":"}]," echo \"Triggered by $",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"{"}]," github.event_name ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"}"}]," event.\"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"run"}],["$","span",null,{"className":"token punctuation","children":":"}]," echo \"Exit with status $",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"{"}]," job.status ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"}"}],".\"\n"]}]]}]}],["$","p",null,{"children":["只要把它放在对应的位置，在每次 push 时这个 Workflow 就会触发。除了 ",["$","code",null,{"children":"push"}],", ",["$","code",null,{"children":"pull"}],", ",["$","code",null,{"children":"merge"}]," 等 GitHub 事件以外，也可以设定按周期自动运行。因此也有人拿它做爬虫或者自动签到之类的，不过这可能有滥用的嫌疑。"]}],["$","p",null,{"children":["我们可以在仓库的 Actions 页面看到 ",["$","code",null,{"children":"workflow"}]," 的的运行情况。"]}],["$","div",null,{"children":["$","img",null,{"alt":"github-actions-example","src":"/static/images/github-actions-example.png","width":"2056","height":"1502"}]}],["$","p",null,{"children":"可以发现，Github Actions 的一些功能和 Jenkins 等部署系统很像，这里简单对比一下。"}],["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"方面"}],["$","th",null,{"children":"Github Actions"}],["$","th",null,{"children":"Jenkins"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"主体"}]}],["$","td",null,{"children":"由GitHub官方提供的CI/CD工具"}],["$","td",null,{"children":"开源社区维护的持续集成和持续部署工具。"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"安装部署"}]}],["$","td",null,{"children":"无需安装。也提供自建服务器的功能。"}],["$","td",null,{"children":"需要独立安装并在服务器上配置。"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"价格"}]}],["$","td",null,{"children":"公共仓库免费的，私有仓库有分钟数限制。"}],["$","td",null,{"children":"完全免费，但有额外硬件成本。"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"平台支持"}]}],["$","td",null,{"children":"支持各种主流操作系统和平台。"}],["$","td",null,{"children":"可以在任何支持Java的平台上运行"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"UI和用户体验"}]}],["$","td",null,{"children":"现代化的UI，与GitHub深度集成。"}],["$","td",null,{"children":"UI相对较老，但功能强大，可能需要一些学习曲线。"}]]}]]}]]}],["$","h2",null,{"id":"概念解释","children":[["$","a",null,{"href":"#概念解释","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"概念解释"]}],["$","h3",null,{"id":"workflows","children":[["$","a",null,{"href":"#workflows","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/using-workflows","children":"Workflows"}]]}],["$","p",null,{"children":["一个 ",["$","code",null,{"children":"workflow"}]," 就是一个自动化任务的整个流程，它由一个或多个 ",["$","code",null,{"children":"job"}]," 组成，由 ",["$","code",null,{"children":"event"}]," 触发。",["$","code",null,{"children":"workflow"}]," 也可以包含其他的 ",["$","code",null,{"children":"workflow"}],"。要创建一个 ",["$","code",null,{"children":"workflow"}],"，只需在仓库的 ",["$","code",null,{"children":".github/workflows"}]," 目录下新建一个 ",["$","code",null,{"children":"*.yml"}]," 文件。"]}],["$","h3",null,{"id":"events","children":[["$","a",null,{"href":"#events","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows","children":"Events"}]]}],["$","p",null,{"children":["一个 ",["$","code",null,{"children":"event"}]," 就是能够触发 ",["$","code",null,{"children":"workflow"}]," 的事件。一般是对仓库进行某些操作，例如 push，pull request，issue。但是也可以通过官方的 ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/rest/repos#create-a-repository-dispatch-event","children":"REST API"}]," 来手动触发。"]}],["$","h3",null,{"id":"jobs","children":[["$","a",null,{"href":"#jobs","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/using-jobs","children":"Jobs"}]]}],["$","p",null,{"children":["一个 ",["$","code",null,{"children":"job"}]," 就是 ",["$","code",null,{"children":"workflow"}]," 的一个步骤，它由一系列的 ",["$","code",null,{"children":"step"}]," 组成。这些 ",["$","code",null,{"children":"step"}]," 都是在同一个 ",["$","code",null,{"children":"runner"}]," 上运行，所以互相之间可以共享数据。"]}],["$","p",null,{"children":["你可以把一系列 ",["$","code",null,{"children":"step"}]," 想象成在同一台机器上顺序执行的命令，你也可以使用其他人写好的 ",["$","code",null,{"children":"action"}]," 来作为 ",["$","code",null,{"children":"step"}],"，例如："]}],["$","$L11",null,{"className":"language-yml","children":["$","code",null,{"className":"language-yml code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"name"}],["$","span",null,{"className":"token punctuation","children":":"}]," GitHub Actions Demo\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"run-name"}],["$","span",null,{"className":"token punctuation","children":":"}]," Example workflow using an action\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"on"}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"push",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"jobs"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"Example-Action"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"runs-on"}],["$","span",null,{"className":"token punctuation","children":":"}]," ubuntu",["$","span",null,{"className":"token punctuation","children":"-"}],"latest\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"steps"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"uses"}],["$","span",null,{"className":"token punctuation","children":":"}]," actions/checkout@v3\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"uses"}],["$","span",null,{"className":"token punctuation","children":":"}]," actions/setup",["$","span",null,{"className":"token punctuation","children":"-"}],"node@v3\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token atrule key","children":"with"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["          ",["$","span",null,{"className":"token atrule key","children":"node-version"}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token string","children":"'12'"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"run"}],["$","span",null,{"className":"token punctuation","children":":"}]," npm install\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"run"}],["$","span",null,{"className":"token punctuation","children":":"}]," npm test\n"]}]]}]}],["$","p",null,{"children":["这个 ",["$","code",null,{"children":"workflow"}]," 会在每次 push 时触发，然后在 ",["$","code",null,{"children":"ubuntu-latest"}]," 上运行一系列 ",["$","code",null,{"children":"step"}],"，这些 ",["$","code",null,{"children":"step"}]," 都是使用其他人写好的 ",["$","code",null,{"children":"action"}]," ",["$","code",null,{"children":"actions/checkout@v3"}]," 会把仓库的代码检出到 ",["$","code",null,{"children":"ubuntu-latest"}]," 上。",["$","code",null,{"children":"actions/setup-node@v3"}]," 则会安装 ",["$","code",null,{"children":"node"}]," 环境。"]}],["$","p",null,{"children":["默认情况下，同一个 ",["$","code",null,{"children":"workflow"}]," 的 ",["$","code",null,{"children":"job"}]," 是并行执行的，但是也可以互相设置依赖来线性执行，如："]}],["$","$L11",null,{"className":"language-yml","children":["$","code",null,{"className":"language-yml code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"jobs"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"job1"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"job2"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"needs"}],["$","span",null,{"className":"token punctuation","children":":"}]," job1\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"job3"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"needs"}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"job1",["$","span",null,{"className":"token punctuation","children":","}]," job2",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}]]}]}],["$","h3",null,{"id":"actions","children":[["$","a",null,{"href":"#actions","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/creating-actions","children":"Actions"}]]}],["$","p",null,{"children":["一个 ",["$","code",null,{"children":"action"}]," 是一系列动作的合集，例如上文的 ",["$","code",null,{"children":"actions/checkout@v3"}]," 和 ",["$","code",null,{"children":"actions/setup-node@v3"}]," 就是两个 ",["$","code",null,{"children":"action"}],"。一般对于常用的操作，我们可以直接使用其他人写好的 ",["$","code",null,{"children":"action"}],"，也可以自己创建 ",["$","code",null,{"children":"action"}],"。"]}],["$","p",null,{"children":["在官方提供的 ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://github.com/marketplace?type=actions","children":"marketplace"}]," 上可以查看编写好的 ",["$","code",null,{"children":"action"}],"。"]}],["$","div",null,{"children":["$","img",null,{"alt":"Marketplace","src":"/static/images/github-actions-marketplace.png","width":"2390","height":"1746"}]}],["$","h3",null,{"id":"runners","children":[["$","a",null,{"href":"#runners","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners","children":"Runners"}]]}],["$","p",null,{"children":["一个 ",["$","code",null,{"children":"runner"}]," 就是运行 ",["$","code",null,{"children":"workflow"}]," 的机器（估计是一个虚拟容器），每次 ",["$","code",null,{"children":"workflow"}]," 都会在一个新的 ",["$","code",null,{"children":"runner"}]," 上运行。GitHub 官方提供了不同系统下的 ",["$","code",null,{"children":"runner"}],"，通过 ",["$","code",null,{"children":"runs-on"}]," 来指定。"]}],["$","$L11",null,{"className":"language-yml","children":["$","code",null,{"className":"language-yml code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"jobs"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"job1"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"runs-on"}],["$","span",null,{"className":"token punctuation","children":":"}]," ubuntu",["$","span",null,{"className":"token punctuation","children":"-"}],"latest\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"job2"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"runs-on"}],["$","span",null,{"className":"token punctuation","children":":"}]," windows",["$","span",null,{"className":"token punctuation","children":"-"}],"latest\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"job3"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"runs-on"}],["$","span",null,{"className":"token punctuation","children":":"}]," macos",["$","span",null,{"className":"token punctuation","children":"-"}],"latest\n"]}]]}]}],["$","p",null,{"children":["默认的 ",["$","code",null,{"children":"runner"}]," 配置如下",["$","sup",null,{"children":["$","a",null,{"href":"#user-content-fn-2","aria-describedby":"footnote-label","data-footnote-ref":true,"id":"user-content-fnref-2","children":"2"}]}],"："]}],["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"align":"left","children":"Type"}],["$","th",null,{"align":"left","children":"CPU"}],["$","th",null,{"align":"left","children":"Memory"}],["$","th",null,{"align":"left","children":"SSD"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"align":"left","children":"Windows"}],["$","td",null,{"align":"left","children":"2-core"}],["$","td",null,{"align":"left","children":"7 GB"}],["$","td",null,{"align":"left","children":"14 GB"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"left","children":"Linux"}],["$","td",null,{"align":"left","children":"2-core"}],["$","td",null,{"align":"left","children":"7 GB"}],["$","td",null,{"align":"left","children":"14 GB"}]]}],["$","tr",null,{"children":[["$","td",null,{"align":"left","children":"macOS"}],["$","td",null,{"align":"left","children":"3-core"}],["$","td",null,{"align":"left","children":"14 GB"}],["$","td",null,{"align":"left","children":"14 GB"}]]}]]}]]}],["$","p",null,{"children":["如果你需要更高的配置，可以使用官方提供的 ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/using-github-hosted-runners/about-larger-runners#understanding-billing","children":"larger runner"}],"，最高提供 64 核，256 GB， 2040 GB SSD 的 Windows 和 Ubuntu 配置，但是需要额外付费。"]}],["$","p",null,{"children":["官方也提供了",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners/about-self-hosted-runners","children":"自建 runner"}]," 的功能，不过我比较怀疑如果都走到这一步了，它和传统的自动构建工具相比还有多大优势。"]}],["$","h2",null,{"id":"其他","children":[["$","a",null,{"href":"#其他","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"其他"]}],["$","h3",null,{"id":"context","children":[["$","a",null,{"href":"#context","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/learn-github-actions/contexts","children":"Context"}]]}],["$","p",null,{"children":["所谓 ",["$","code",null,{"children":"context"}]," 其实就是配置文件内可以使用的变量，例如上文中的 ",["$","code",null,{"children":"$${{ github.actor }}"}]," 和 ",["$","code",null,{"children":"$${{ runner.os }}"}]," 就是两个 ",["$","code",null,{"children":"context"}]," 提供的变量值。GitHub 官方提供了一系列的 ",["$","code",null,{"children":"context"}],"，如 ",["$","code",null,{"children":"github"}],"，",["$","code",null,{"children":"env"}],"，",["$","code",null,{"children":"vars"}],"，",["$","code",null,{"children":"job"}],", ",["$","code",null,{"children":"steps"}],", ",["$","code",null,{"children":"secrets"}]," 等等，你可以在",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#contexts","children":"这个页面"}],"查看详情。"]}],["$","h2",null,{"id":"secrets","children":[["$","a",null,{"href":"#secrets","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"Secrets"]}],["$","p",null,{"children":[["$","code",null,{"children":"secrets"}]," 是一种特殊的 ",["$","code",null,{"children":"context"}],"，由于自动化部署往往涉及到一些授权信息（数据库密码，私钥等等），我们不希望这些信息直接暴露在配置文件中，就有了 ",["$","code",null,{"children":"secrets"}]," 。要使用 ",["$","code",null,{"children":"secrets"}],"，你只需要在项目的设置页面添加对应的值，然后在脚本中使用 ",["$","code",null,{"children":"$${{ secrets.SECRET_NAME }}"}]," 来引用即可。存放在 ",["$","code",null,{"children":"secrets"}]," 中的值是加密的。"]}],["$","$L11",null,{"className":"language-yml","children":["$","code",null,{"className":"language-yml code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"name"}],["$","span",null,{"className":"token punctuation","children":":"}]," Secret Demo\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"run-name"}],["$","span",null,{"className":"token punctuation","children":":"}]," Example workflow using secrets\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"on"}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"push",["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token atrule key","children":"jobs"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"Example-Secret"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"runs-on"}],["$","span",null,{"className":"token punctuation","children":":"}]," ubuntu",["$","span",null,{"className":"token punctuation","children":"-"}],"latest\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"steps"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"run"}],["$","span",null,{"className":"token punctuation","children":":"}]," echo \"Secret value is $",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"{"}]," secrets.SECRET_NAME ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"}"}],"\"\n"]}]]}]}],["$","h2",null,{"id":"artifacts","children":[["$","a",null,{"href":"#artifacts","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/learn-github-actions/essential-features-of-github-actions#sharing-data-between-jobs","children":"Artifacts"}]]}],["$","p",null,{"children":["我们知道同一个 ",["$","code",null,{"children":"job"}]," 中的 ",["$","code",null,{"children":"step"}]," 是运行在一台虚拟容器内，所以他们可以很方便的通过文件地址来共享数据。但是如果需要在不同的 ",["$","code",null,{"children":"job"}]," 之间共享数据，该怎么办呢？"]}],["$","p",null,{"children":"更进一步，如果我们希望任务运行完成后数据仍然可以保存和下载，又该怎么办呢？"}],["$","p",null,{"children":["这就需要用到 ",["$","code",null,{"children":"artifacts"}]," 了，官方建议的 ",["$","code",null,{"children":"artifacts"}]," 的使用场景这么几种："]}],["$","ol",null,{"children":[["$","li",null,{"children":"日志文件"}],["$","li",null,{"children":"测试结果，截屏等"}],["$","li",null,{"children":"二进制文件或者压缩文件"}],["$","li",null,{"children":"压力测试结果还有代码覆盖率结果"}]]}],["$","p",null,{"children":[["$","code",null,{"children":"artifacts"}]," 的使用方法很简单，只需要在 ",["$","code",null,{"children":"job"}]," 中使用 ",["$","code",null,{"children":"upload-artifact"}]," 和 ",["$","code",null,{"children":"download-artifact"}]," 来上传和下载文件即可。"]}],["$","$L11",null,{"className":"language-yml","children":["$","code",null,{"className":"language-yml code-highlight","children":[["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"name"}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token string","children":"'Upload Artifact'"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"uses"}],["$","span",null,{"className":"token punctuation","children":":"}]," actions/upload",["$","span",null,{"className":"token punctuation","children":"-"}],"artifact@v3\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"with"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token atrule key","children":"name"}],["$","span",null,{"className":"token punctuation","children":":"}]," my",["$","span",null,{"className":"token punctuation","children":"-"}],"artifact\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token atrule key","children":"path"}],["$","span",null,{"className":"token punctuation","children":":"}]," my_file.txt\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token atrule key","children":"retention-days"}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token number","children":"5"}],"\n"]}]]}]}],["$","$L11",null,{"className":"language-yml","children":["$","code",null,{"className":"language-yml code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"name"}],["$","span",null,{"className":"token punctuation","children":":"}]," Download a single artifact\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"uses"}],["$","span",null,{"className":"token punctuation","children":":"}]," actions/download",["$","span",null,{"className":"token punctuation","children":"-"}],"artifact@v3\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"with"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"name"}],["$","span",null,{"className":"token punctuation","children":":"}]," my",["$","span",null,{"className":"token punctuation","children":"-"}],"artifact\n"]}]]}]}],["$","p",null,{"children":["如果要从浏览器中下载 ",["$","code",null,{"children":"artifacts"}],"，可以在 ",["$","code",null,{"children":"workflow"}]," 的页面点击 ",["$","code",null,{"children":"CodeQL"}]," 按钮，然后点击对应的 ",["$","code",null,{"children":"artifacts"}]," 下载即可。"]}],["$","h3",null,{"id":"cache","children":[["$","a",null,{"href":"#cache","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/using-workflows/caching-dependencies-to-speed-up-workflows#comparing-artifacts-and-dependency-caching","children":"Cache"}]]}],["$","p",null,{"children":["与 ",["$","code",null,{"children":"artifacts"}]," 类似，",["$","code",null,{"children":"cache"}]," 也是一种数据持久化保存的方式，它用来保存依赖库，编译缓存文件之类的数据。如果不使用 ",["$","code",null,{"children":"cache"}],"，即使两次 ",["$","code",null,{"children":"workflow"}]," 的代码完全一样，也要重新下载安装所有依赖。合适的场景下使用 ",["$","code",null,{"children":"cache"}]," 可以大大提高 ",["$","code",null,{"children":"workflow"}]," 的运行速度。"]}],["$","p",null,{"children":[["$","code",null,{"children":"cache"}]," 使用起来也并不复杂，只用在操作之前调用 ",["$","code",null,{"children":"actions/cache"}]," 来下载缓存，如果对应 ",["$","code",null,{"children":"key"}]," 的缓存不存在，它便会自动将本次的结果存入相应的路径中。"]}],["$","$L11",null,{"className":"language-yml","children":["$","code",null,{"className":"language-yml code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"-"}]," ",["$","span",null,{"className":"token atrule key","children":"name"}],["$","span",null,{"className":"token punctuation","children":":"}]," Cache node modules\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"uses"}],["$","span",null,{"className":"token punctuation","children":":"}]," actions/cache@v3\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token atrule key","children":"with"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"path"}],["$","span",null,{"className":"token punctuation","children":":"}]," ~/.npm\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token atrule key","children":"key"}],["$","span",null,{"className":"token punctuation","children":":"}]," $",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"{"}]," runner.os ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"-"}],"node",["$","span",null,{"className":"token punctuation","children":"-"}],"$$",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"{"}]," hashFiles('",["$","span",null,{"className":"token important","children":"**/package-lock.json')"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],["$","p",null,{"children":["具体用法参考",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/using-workflows/caching-dependencies-to-speed-up-workflows","children":"官方文档"}],"。"]}],["$","h2",null,{"id":"总结","children":[["$","a",null,{"href":"#总结","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"总结"]}],["$","p",null,{"children":"GiHub Actions 是一个和 GitHub 深度集成的自动化部署工具，可以很方便的监听 GitHub 事件并执行操作。最重要的一点是它是免费的，而且背后是微软在撑腰，不用太担心会突然关闭。"}],["$","p",null,{"children":"其实 GitHub Actions 也是现在 Serverless 大趋势的一个缩影，云厂商越来越倾向于提供具体的应用，而不是整机。对于云厂商来说这可以方便他们进行权限管理，资源分配和规模化，也能帮助他们提高机器利用率，降低成本。对于用户来说，也可以更加专注于自己的业务，而不用关心底层的资源管理。代价就是会更多的依赖于云厂商提供的商业服务，而不是更开放的底层服务。也不知道这是好事还是坏事。"}],["$","hr",null,{}],["$","h2",null,{"id":"参考资料","children":[["$","a",null,{"href":"#参考资料","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"参考资料"]}],["$","ol",null,{"children":[["$","li",null,{"children":["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions","children":"GitHub Actions - Git Docs"}]}],["$","li",null,{"children":["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://www.jenkins.io","children":"Jenkin 官方网站"}]}]]}],["$","section",null,{"className":"footnotes","data-footnotes":true,"children":[["$","h2",null,{"id":"footnote-label","className":"sr-only","children":[["$","a",null,{"href":"#footnote-label","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"icon icon-link"}]}],"Footnotes"]}],["$","ol",null,{"children":[["$","li",null,{"id":"user-content-fn-1","children":["$","p",null,{"children":["限制额度可能会发生变化，参考",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#usage-limits","children":"官方文档"}],"。 ",["$","a",null,{"href":"#user-content-fnref-1","aria-label":"Back to content","className":"data-footnote-backref","data-footnote-backref":true,"children":"↩"}]]}]}],["$","li",null,{"id":"user-content-fn-2","children":["$","p",null,{"children":["具体配置可能会发生变化，参考",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners#supported-runners-and-hardware-resources","children":"官方文档"}],"。 ",["$","a",null,{"href":"#user-content-fnref-2","aria-label":"Back to content","className":"data-footnote-backref","data-footnote-backref":true,"children":"↩"}]]}]}]]}]]}]]}],["$","div",null,{"className":"pb-6 pt-6 text-center text-gray-700 dark:text-gray-300","id":"comment","children":["$","$L12",null,{"slug":"github-actions"}]}]]}],["$","footer",null,{"children":[["$","div",null,{"className":"divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y","children":[["$","div",null,{"className":"py-4 xl:py-8","children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Tags"}],["$","div",null,{"className":"flex flex-wrap","children":[["$","$L9",null,{"href":"/tags/git","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"git"}],["$","$L9",null,{"href":"/tags/github","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"github"}],["$","$L9",null,{"href":"/tags/devops","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"devops"}],["$","$L9",null,{"href":"/tags/automation","className":"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":"automation"}]]}]]}],["$","div",null,{"className":"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8","children":[["$","div",null,{"children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Previous Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L9",null,{"href":"/blog/launchd-explained","children":"Launchd 简明指南 -  Mac 上最强大的后台管理工具"}]}]]}],["$","div",null,{"children":[["$","h2",null,{"className":"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400","children":"Next Article"}],["$","div",null,{"className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","children":["$","$L9",null,{"href":"/blog/systemd-incomplete-guide","children":"Systemd 使用不完全指北"}]}]]}]]}]]}],["$","div",null,{"className":"pt-4 xl:pt-8","children":["$","$L9",null,{"href":"/blog","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","aria-label":"Back to the blog","children":"← Back to the blog"}]}]]}]]}]]}]}]]}]]
e:null
